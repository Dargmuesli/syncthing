#!/bin/bash
docker manifest create $IMAGE_NAME $(echo $IMAGE_NAME | sed "s/:latest/:i386-latest/") $(echo $IMAGE_NAME | sed "s/:latest/:amd64-latest/") $(echo $IMAGE_NAME | sed "s/:latest/:arm-latest/") $(echo $IMAGE_NAME | sed "s/:latest/:arm64v8-latest/") $(echo $IMAGE_NAME | sed "s/:latest/:ppc64le-latest/") $(echo $IMAGE_NAME | sed "s/:latest/:s390x-latest/")

docker manifest annotate $IMAGE_NAME $(echo $IMAGE_NAME | sed "s/:latest/:i386-latest/") --os linux --arch 386
docker manifest annotate $IMAGE_NAME $(echo $IMAGE_NAME | sed "s/:latest/:amd64-latest/") --os linux --arch amd64
docker manifest annotate $IMAGE_NAME $(echo $IMAGE_NAME | sed "s/:latest/:arm-latest/") --os linux --arch arm
docker manifest annotate $IMAGE_NAME $(echo $IMAGE_NAME | sed "s/:latest/:arm64v8-latest/") --os linux --arch arm64 --variant armv8
docker manifest annotate $IMAGE_NAME $(echo $IMAGE_NAME | sed "s/:latest/:ppc64le-latest/") --os linux --arch ppc64le
docker manifest annotate $IMAGE_NAME $(echo $IMAGE_NAME | sed "s/:latest/:s390x-latest/") --os linux --arch s390x
